# Backend Improvement Tasks

- [x] Make DEBUG configurable via environment variable to ease local development and production configuration.
- [x] Add additional security headers (e.g., Content-Security-Policy, Strict-Transport-Security) in custom middleware for better hardening.
- [x] Optimize product list endpoint by reducing verbose logging and adding caching to the list query.
- [x] Standardize MongoDB connection environment variables between settings and connection helper.
- [x] Trigger asynchronous order confirmation emails after order creation using Celery.
- [x] Introduce rate limiting on the login endpoint to mitigate brute-force attacks.

- [x] Add unit tests for `SecurityHeadersMiddleware` to verify required HTTP headers are present.
- [x] Refactor order creation logic into a service layer to reduce complexity and ensure atomic inventory updates.
- [x] Implement structured logging with configurable log levels and forward logs to external monitoring.
- [x] Enforce code linting (e.g., flake8/black) and integrate checks into the CI pipeline.
- [x] Require email verification for new user signups and send verification emails asynchronously.
- [x] Provide a `/health/` endpoint for basic application and database connectivity checks.
- [x] Replace stubbed `Discount` and `Category` classes in the discounts API with real model integration and remove temporary placeholders.
- [x] Implement unit tests for the discounts app covering models and API endpoints.
- [x] Generate API documentation (e.g., OpenAPI/Swagger) for easier client integration.
- [x] Serve a minimal `robots.txt` for basic SEO directives.
- [x] Add Django `AUTH_PASSWORD_VALIDATORS` to enforce strong password rules.
- [x] Replace `TokenAuthentication` with `JWTAuthentication` in order and review viewsets.
- [x] Introduce pagination to the review list endpoint to prevent unbounded result sets.
- [x] Apply rate throttling to review creation to mitigate spam submissions.
- [x] Move review rating and count updates into model methods or a service layer.
- [x] Add tests covering review creation, update, and deletion with rating recalculation.
- [x] Allow client-defined page size with an upper bound in `CustomProductPagination`.
- [x] Restrict product creation, update, and deletion endpoints to staff users.
- [x] Add a unique `slug` field to `Product` for SEO-friendly URLs.
- [x] Support filtering products by category and price range using query parameters.
- [x] Write tests verifying caching behavior for product list and detail views.
- [x] Release reserved inventory when orders are canceled or payments fail.
- [x] Add unit tests for `create_order_from_cart` covering discounts and inventory changes.
- [x] Implement an order cancellation endpoint that restores inventory.
- [x] Schedule a periodic Celery task to purge inactive carts.
- [x] Provide a management command to remove expired email verification tokens.
- [x] Integrate Bandit security scanning into the CI workflow.
- [x] Add a `pre-commit` configuration to enforce formatting and linting before commits.
- [x] Introduce static type checking with mypy and add type hints across the codebase.
- [x] Replace string `user_id` fields in Mongo documents with `ReferenceField` to the `User` model.
- [x] Cache category list responses and invalidate cache on updates.
- [x] Internationalize user-facing error messages via Django's translation framework.
- [x] Document authentication requirements and examples in the README.
- [x] Normalize discount codes to enforce case-insensitive uniqueness.
- [x] Log unhandled Stripe webhook event types for easier debugging.

 - [x] Integrate Sentry for centralized error monitoring.
- [x] Implement API versioning to support backward-compatible changes.
- [x] Add a GraphQL endpoint to enable flexible client queries.
- [x] Introduce soft-delete functionality for products, orders, and carts with restoration options.
- [x] Add database indexes on frequently queried fields to improve performance.
- [x] Enforce global API rate limiting to protect against abusive traffic.
- [x] Optimize queryset performance using `select_related` and `prefetch_related` where appropriate.
- [x] Implement background SMS notifications for order status updates.
- [x] Provide bulk product import and export via CSV files.
- [ ] Implement WebSocket-based real-time order status notifications.
- [ ] Add a feature flag framework to allow gradual feature rollouts.
- [ ] Support distributed caching with a Redis cluster for scalability.
- [ ] Implement audit logging for sensitive administrative actions.
- [ ] Add integration tests validating Stripe webhook processing.
- [ ] Introduce full-text search powered by Elasticsearch.
- [ ] Monitor Celery tasks with metrics and alerts on failures.
- [x] Provide a management command to seed the database with sample data.
- [ ] Offload product image uploads to asynchronous cloud storage such as S3.
- [x] Add an automated migration check in CI to catch potential issues early.
- [x] Support user profile avatars with size and format validation.
- [x] Configure dynamic CORS allowed origins per environment.
- [x] Schedule periodic cleanup of expired user sessions.
- [ ] Publish an official Python API client SDK for external integrations.
- [ ] Implement multi-factor authentication for administrative users.
- [ ] Add a user data export endpoint to support GDPR requests.
